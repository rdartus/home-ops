# yaml-language-server: $schema=https://raw.githubusercontent.com/bjw-s-labs/helm-charts/refs/heads/main/charts/library/common/values.schema.json
---
global:
  # -- Set an override for the prefix of the fullname
  nameOverride:
  # -- Set the entire name definition
  fullnameOverride:
  # -- Propagate global metadata to Pod labels.
  propagateGlobalMetadataToPods: false
  # -- Set additional global labels. Helm templates can be used.
  labels: {}
  # -- Set additional global annotations. Helm templates can be used.
  annotations: {}

# -- Set the strategy for the default pod options. Defaults to
#    overwrite: If pod-level options are set, use those instead of the defaults.
#    merge: If pod-level options are set, merge them with the defaults
# @default -- overwrite
defaultPodOptionsStrategy: overwrite

# -- Set default options for all controllers / pods here
# Each of these options can be overridden on a Controller level
defaultPodOptions:
  # -- Defines affinity constraint rules. Helm templates can be used.
  # [[ref]](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity)
  affinity: 
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchFields:
          - key: metadata.name
            operator: In
            values:
            - nucoumouk

  # -- Set annotations on the Pod. Pod-specific values will be merged with this.
  annotations: {}

  # -- Specifies whether a service account token should be automatically mounted.
  automountServiceAccountToken: true

  # -- Configuring the ndots option may resolve nslookup issues on some Kubernetes setups.
  dnsConfig: {}

  # -- Defaults to "ClusterFirst" if hostNetwork is false and "ClusterFirstWithHostNet" if hostNetwork is true.
  dnsPolicy: ""

  # -- Enable/disable the generation of environment variables for services.
  # [[ref]](https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/#accessing-the-service)
  enableServiceLinks: false

  # -- Allows specifying explicit hostname setting
  hostname: ""

  # -- Use hostAliases to add custom entries to /etc/hosts - mapping IP addresses to hostnames.
  # [[ref]](https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/)
  hostAliases: []

  # -- Use the host's ipc namespace
  hostIPC: false

  # -- When using hostNetwork make sure you set dnsPolicy to `ClusterFirstWithHostNet`
  hostNetwork: false

  # -- Use the host's pid namespace
  hostPID: false

  # -- Use the host's user namespace (requires 1.29 or newer)
  hostUsers:

  # -- Set image pull secrets
  imagePullSecrets: []

  # -- Set labels on the Pod. Pod-specific values will be merged with this.
  labels: {}

  # -- Node selection constraint
  # [[ref]](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector)
  nodeSelector: {}

  # -- Custom priority class for different treatment by the scheduler
  priorityClassName: ""

  # -- Set Container restart policy.
  # @default -- `Always`. When `controller.type` is `cronjob` it defaults to `Never`.
  restartPolicy: ""

  # -- Allow specifying a runtimeClassName other than the default one (ie: nvidia)
  runtimeClassName: ""

  # -- Allows specifying a custom scheduler name
  schedulerName: ""

  # -- Configure the Security Context for the Pod
  securityContext: {}

  # -- Allows sharing process namespace between containers in a Pod
  # -- [[ref](https://kubernetes.io/docs/tasks/configure-pod-container/share-process-namespace/)]
  shareProcessNamespace:

  # -- Duration in seconds the pod needs to terminate gracefully
  # -- [[ref](https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/pod-v1/#lifecycle)]
  terminationGracePeriodSeconds:
  # -- Specify taint tolerations
  # [[ref]](https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/)
  tolerations: []

  # -- Defines topologySpreadConstraint rules.
  # [[ref]](https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/)
  topologySpreadConstraints: []

controllers:
  main:
    # -- enable the controller.
    enabled: true

    # -- Set the controller type.
    # Valid options are deployment, daemonset, statefulset, cronjob or job
    type: deployment
    # -- Set annotations on the deployment/statefulset/daemonset/cronjob/job
#     annotations: {}
#     # -- Set labels on the deployment/statefulset/daemonset/cronjob/job
#     labels: {}
#     # -- Number of desired pods. When using a HorizontalPodAutoscaler, set this to `null`.
#     replicas: 1
#     # -- Set the controller upgrade strategy
#     # For Deployments, valid values are Recreate (default) and RollingUpdate.
#     # For StatefulSets, valid values are OnDelete and RollingUpdate (default).
#     # DaemonSets/CronJobs/Jobs ignore this.
#     strategy:

#     rollingUpdate:
#       # -- Set deployment RollingUpdate max unavailable
#       unavailable:
#       # -- Set deployment RollingUpdate max surge
#       surge:
#       # -- Set statefulset RollingUpdate partition
#       partition:
#     # -- ReplicaSet revision history limit
#     revisionHistoryLimit: 3

#     # -- Set the controller service account name
#     # This is entirely optional, if empty or `null` the controller will use the default service account
#     serviceAccount:
#       # -- Only use one of `name` or `identifier`. In case both are specified it will prioritize `identifier`.
#       # -- Reference a service account identifier from this values.yaml
#       identifier:
#       # -- Explicitly set the service account name
#       name:
#     # -- CronJob configuration. Required only when using `controller.type: cronjob`.
#     # @default -- See below
    # cronjob:
    #   # -- Suspends the CronJob
    #   # [[ref]](https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/#schedule-suspension)
    #   # @default -- false
    #   # suspend: 
    #   # -- Specifies how to treat concurrent executions of a job that is created by this cron job
    #   # valid values are Allow, Forbid or Replace
    #   concurrencyPolicy: Replace
    #   # -- Sets the CronJob timezone (only works in Kubernetes >= 1.27)
    #   # timeZone: 
    #   # -- Sets the CronJob time when to execute your jobs
    #   schedule: "0 5 * * *"
    #   # -- The deadline in seconds for starting the job if it misses its scheduled time for any reason
    #   startingDeadlineSeconds: 30
    #   # -- The number of succesful Jobs to keep
    #   successfulJobsHistory: 1
    #   # -- The number of failed Jobs to keep
    #   failedJobsHistory: 1
    #   # -- If this field is set, ttlSecondsAfterFinished after the Job finishes, it is eligible to
    #   # be automatically deleted.
    #   # ttlSecondsAfterFinished:
    #   # -- Limits the number of times a failed job will be retried
    #   backoffLimit: 6
    #   # -- Specify the number of parallel jobs
    #   # parallelism: 0

#     # -- Job configuration. Required only when using `controller.type: job`.
#     # @default -- See below
#     job:
#       # -- Suspends the Job
#       # [[ref]](https://kubernetes.io/docs/concepts/workloads/controllers/job/#suspending-a-job)
#       # @default -- false
#       suspend:
#       # -- If this field is set, ttlSecondsAfterFinished after the Job finishes, it is eligible to
#       # be automatically deleted.
#       ttlSecondsAfterFinished:
#       # -- Limits the number of times a failed job will be retried
#       backoffLimit: 6
#       # -- Specify the number of parallel jobs
#       parallelism:
#       # -- Specify the number of completions for the job
#       completions:
#       # -- Specify the completionMode for the job
#       completionMode:

#     # -- StatefulSet configuration. Required only when using `controller.type: statefulset`.
#     statefulset:
#       # -- Set podManagementPolicy, valid values are Parallel and OrderedReady (default).
#       podManagementPolicy:

#       # -- Used to create individual disks for each instance.
#       volumeClaimTemplates: []
#       # - name: data
#       #   labels: {}
#       #   annotations: {}
#       #   globalMounts:
#       #     - path: /data
#       #   accessMode: "ReadWriteOnce"
#       #   dataSourceRef:
#       #     apiGroup: snapshot.storage.k8s.io
#       #     kind: VolumeSnapshot
#       #     name: MySnapshot
#       #   size: 1Gi
#       # - name: backup
#       #   labels: {}
#       #   annotations: {}
#       #   globalMounts:
#       #     - path: /backup
#       #       subPath: theSubPath
#       #   accessMode: "ReadWriteOnce"
#       #   size: 2Gi
#       #   storageClass: cheap-storage-class

#     # Controller-specific overrides for `defaultPodOptions` keys
#     pod: {}

#     # -- Whether to apply defaultContainerOptions to initContainers
#     applyDefaultContainerOptionsToInitContainers: true
#     # -- Set the strategy for the default container options. Defaults to
#     #    overwrite: If container-level options are set, use those instead of the defaults.
#     #    merge: If container-level options are set, merge them with the defaults
#     # @default -- overwrite
#     defaultContainerOptionsStrategy: overwrite
#     # -- Set default options for all (init)Containers here
#     # Each of these options can be overridden on a container level
#     defaultContainerOptions:
#       image:
#         # -- Override the image repository for the containers
#         repository:
#         # -- Override the image tag for the containers
#         tag:
#         # -- Override the image pull policy for the containers
#         pullPolicy:
#       # -- Override the command(s) for the containers
#       command:
#       # -- Override the args for the containers
#       args:
#       # -- Environment variables.
#       env:
#       # -- Secrets and/or ConfigMaps that will be loaded as environment variables.
#       envFrom: {}
#       # -- Set the resource requests / limits for the container.
#       resources:
#       # -- Configure the Security Context for the container
#       securityContext: {}

    containers:
      main:
        # -- Override the container name
        # nameOverride:

        # -- Specify if this container depends on any other containers
        # This is used to determine the order in which the containers are rendered.
        dependsOn: []

        image:
          # -- image repository
          repository: ghcr.io/gtsteffaniak/filebrowser
          # -- image tag
          tag: latest@sha256:d9d7f6ec68ac8d5a591eea5e97f8b85d1f9de2b68732abb5de950217b25e2b70
          # -- image pull policy
          pullPolicy: IfNotPresent

#         # -- Override the command(s) for the container
#         command: []
#         # -- Override the args for the container
#         args: []
#         # -- Override the working directory for the container
#         workingDir:


        env:
          FILEBROWSER_CONFIG: /config/config 
          # FILEBROWSER_DATABASE: /config/database
          FILEBROWSER_ADMIN_PASSWORD: 
            valueFrom:
              secretKeyRef:
                name: default-secret
                key: password
          # FILEBROWSER_ONLYOFFICE_SECRET: 
          # FILEBROWSER_FFMPEG_PATH: 
          FILEBROWSER_OIDC_CLIENT_ID:
            valueFrom:
              secretKeyRef:
                name: filebrowser-secret
                key: oidcClient
          FILEBROWSER_OIDC_CLIENT_SECRET: 
            valueFrom:
              secretKeyRef:
                name: filebrowser-secret
                key: oidcSecret
          # FILEBROWSER_ONLYOFFICE_SECRET:
          #   valueFrom:
          #     secretKeyRef:
          #       name: onlyoffice-secret
          #       key: token

          # FILEBROWSER_JWT_TOKEN_SECRET: 
          # FILEBROWSER_TOTP_SECRET: 
          # FILEBROWSER_RECAPTCHA_SECRET: 
#         # -- Environment variables. Template enabled.
#         # Syntax options:
#         # A) TZ: UTC
#         # B) PASSWD: '{{ .Release.Name }}'
#         # B) TZ:
#         #      value: UTC
#         #      dependsOn: otherVar
#         # D) PASSWD:
#         #      configMapKeyRef:
#         #        name: config-map-name
#         #        key: key-name
#         # E) PASSWD:
#         #      dependsOn:
#         #        - otherVar1
#         #        - otherVar2
#         #      valueFrom:
#         #        secretKeyRef:
#         #          name: secret-name
#         #          key: key-name
#         #      ...
#         # F) - name: TZ
#         #      value: UTC
#         # G) - name: TZ
#         #      value: '{{ .Release.Name }}'
#         # -- Secrets and/or ConfigMaps that will be loaded as environment variables.
#         # Syntax options:
#         # A) Pass an app-template configMap identifier:
#         #    - config: config
#         # B) Pass any configMap name that is not also an identifier (Template enabled):
#         #    - config: random-configmap-name
#         # C) Pass an app-template configMap identifier, explicit syntax:
#         #    - configMapRef:
#         #        identifier: config
#         # D) Pass any configMap name, explicit syntax (Template enabled):
#         #    - configMapRef:
#         #        name: "{{ .Release.Name }}-config"
#         # E) Pass an app-template secret identifier:
#         #    - secret: secret
#         # F) Pass any secret name that is not also an identifier (Template enabled):
#         #    - secret: random-secret-name
#         # G) Pass an app-template secret identifier, explicit syntax:
#         #    - secretRef:
#         #        identifier: secret
#         # H) Pass any secret name, explicit syntax (Template enabled):
#         #    - secretRef:
#         #        name: "{{ .Release.Name }}-secret"
#         envFrom: []

#         # -- Probe configuration
#         # -- [[ref]](https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/)
        # probes:
        #   liveness:
        #     enabled: true
        #     ## Set this to true if you wish to specify your own livenessProbe
        #     custom: true
        #     ## The spec field contains the values for the default livenessProbe.
        #     ## If you selected custom: true, this field holds the definition of the livenessProbe.
        #     spec:
        #       exec:
        #         command:
        #         - /usr/bin/env
        #         - sh
        #         - -c
        #         - curl --fail "localhost:80/"
        #       failureThreshold: 5
        #       initialDelaySeconds: 60
        #       periodSeconds: 10
        #       successThreshold: 1
        #       timeoutSeconds: 10
#         probes:
#           # -- Liveness probe configuration
#           # @default -- See below
#           liveness:
#             # -- Enable the liveness probe
#             enabled: true
#             # -- Set this to `true` if you wish to specify your own livenessProbe
#             custom: false
#             # -- sets the probe type when not using a custom probe
#             # @default -- "TCP"
#             type: TCP
#             # -- The spec field contains the values for the default livenessProbe.
#             # If you selected `custom: true`, this field holds the definition of the livenessProbe.
#             # @default -- See below
#             spec:
#               initialDelaySeconds: 0
#               periodSeconds: 10
#               timeoutSeconds: 1
#               failureThreshold: 3

#           # -- Readiness probe configuration
#           readiness:
#             # -- Enable the readiness probe
#             enabled: true
#             # -- Set this to `true` if you wish to specify your own readinessProbe
#             custom: false
#             # -- sets the probe type when not using a custom probe
#             # @default -- "TCP"
#             type: TCP
#             # -- The spec field contains the values for the default readinessProbe.
#             # If you selected `custom: true`, this field holds the definition of the readinessProbe.
#             # @default -- See below
#             spec:
#               initialDelaySeconds: 0
#               periodSeconds: 10
#               timeoutSeconds: 1
#               failureThreshold: 3

#           # -- Startup probe configuration
#           startup:
#             # -- Enable the startup probe
#             enabled: true
#             # -- Set this to `true` if you wish to specify your own startupProbe
#             custom: false
#             # -- sets the probe type when not using a custom probe
#             # @default -- "TCP"
#             type: TCP
#             # -- The spec field contains the values for the default startupProbe.
#             # If you selected `custom: true`, this field holds the definition of the startupProbe.
#             # @default -- See below
#             spec:
#               initialDelaySeconds: 0
#               timeoutSeconds: 1
#               ## This means it has a maximum of 5*30=150 seconds to start up before it fails
#               periodSeconds: 5
#               failureThreshold: 30

#         # -- Set the resource requests / limits for the container.
#         resources:
#           {}
#           ## We usually recommend not to specify default resources and to leave this as a conscious
#           ## choice for the user. This also increases chances charts run on environments with little
#           ## resources, such as Minikube. If you do want to specify resources, uncomment the following
#           ## lines, adjust them as necessary, and remove the curly braces after 'resources:'.
#           # limits:
#           #   cpu: 100m
#           #   memory: 128Mi
#           # requests:
#           #   cpu: 100m
#           #   memory: 128Mi

#         # -- Configure the Security Context for the container
#         securityContext: {}

#         # -- Configure the lifecycle event hooks for the container
#         # -- [[ref](https://kubernetes.io/docs/tasks/configure-pod-container/attach-handler-lifecycle-event/)]
#         lifecycle: {}

#         # -- Configure the path at which the file to which the containers termination message will be written.
#         # -- [[ref](https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/pod-v1/#lifecycle-1)]
#         terminationMessagePath:

#         # -- Indicate how the containers termination message should be populated.
#         # Valid options are `File` and `FallbackToLogsOnError`.
#         # -- [[ref](https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/pod-v1/#lifecycle-1)]
#         terminationMessagePolicy:

#     # -- Specify any initContainers here as dictionary items.
#     # Each initContainer should have its own key
#     initContainers: {}

# -- If true forces the controllers to use the `default` ServiceAccount for the namespace if one is not explicitly defined.
# This feature flag will be removed on future versions where this will be the default behavior.
enforceServiceAccountCreation: false

serviceAccount:
  {}
  # default:
  #   enabled: false
  #   annotations: {}
  #   labels: {}
# -- Use this to populate secrets with the values you specify.
# Be aware that these values are not encrypted by default, and could therefore visible
# to anybody with access to the values.yaml file.
# Additional Secrets can be added by adding a dictionary key similar to the 'secret' object.
# @default -- See below
secrets:
  {}
  # secret:
  #   # -- Enables or disables the Secret
  #   enabled: false
  #   # -- Labels to add to the Secret
  #   labels: {}
  #   # -- Annotations to add to the Secret
  #   annotations: {}
  #   # -- Secret stringData content. Helm template enabled.
  #   stringData:
  #     {}
  #     # foo: bar

# -- Configure configMaps for the chart here.
# Additional configMaps can be added by adding a dictionary key similar to the 'config' object.
# @default -- See below
configMaps:
  config:
    # -- Enables or disables the configMap
    enabled: true
    # -- Labels to add to the configMap
    labels: {}
    # -- Annotations to add to the configMap
    annotations: {}
    # -- configMap data content. Helm template enabled.
    data: 
      config: |

        server:
          minSearchLength: 3                      # minimum length of search query to begin searching (default: 3)
          disableUpdateCheck: false               # disables backend update check service
          numImageProcessors: 4                   # number of concurrent image processing jobs used to create previews, default is number of cpu cores available.
          socket: ""                              # socket to listen on
          tlsKey: ""                              # path to TLS key
          tlsCert: ""                             # path to TLS cert
          disablePreviews: false                  # disable all previews thumbnails, simple icons will be used
          disablePreviewResize: false             # disable resizing of previews for faster loading over slow connections
          disableTypeDetectionByHeader: false     # disable type detection by header, useful if filesystem is slow.
          port: 80                                # port to listen on
          baseURL: "/"                            # base URL for the server, the subpath that the server is running on.
          logging:
            - levels: ""                          # separated list of log levels to enable. (eg. "info|warning|error|debug")
              apiLevels: ""                       # separated list of log levels to enable for the API. (eg. "info|warning|error")
              output: "stdout"                    # output location. (eg. "stdout" or "path/to/file.log")
              noColors: false                     # disable colors in the output
              json: false                         # output in json format
              utc: false                          # use UTC time in the output instead of local time
          database: "database.db"                 # path to the database file
          sources:                                #  validate:required,dive
            - path: "/jeantasse"                           # file system path. (Can be relative)  validate:required
              name: "jeantasse"                     # display name
              config:
                denyByDefault: false              # deny access unless an "allow" access rule was specifically created.
                private: false                    # designate as source as private -- currently just means no sharing permitted.
                disabled: false                   # disable the source, this is useful so you don't need to remove it from the config file
                indexingIntervalMinutes: 0        # optional manual overide interval in minutes to re-index the source
                disableIndexing: false            # disable the indexing of this source
                conditionals:                     # conditional rules to apply when indexing to include/exclude certain items
                  hidden: false                   # exclude hidden files and folders.
                  ignoreZeroSizeFolders: false    # ignore folders with 0 size
                  rules:                          # list of item rules to apply to specific paths
                    - neverWatchPath: ""          # index the folder in the first pass to get included in search, but never re-indexed.
                      includeRootItem: ""         # include only these items at root folder level
                      fileStartsWith: ""          # (global) exclude files that start with these prefixes. Eg. "archive-" or "backup-"
                      folderStartsWith: ""        # (global) exclude folders that start with these prefixes. Eg. "archive-" or "backup-"
                      fileEndsWith: ""            # (global) exclude files that end with these suffixes. Eg. ".jpg" or ".txt"
                      folderEndsWith: ""          # (global) exclude folders that end with these suffixes. Eg. ".thumbnails" or ".git"
                      folderPath: ""              # (global) exclude folders that match this path. Eg. "/path/to/folder" or "/path/to/folder/subfolder"
                      filePath: ""                # (global) exclude files that match this path. Eg. "/path/to/file.txt" or "/path/to/file.txt/subfile.txt"
                      fileNames: ""               # (global) exclude files that match these names. Eg. "file.txt" or "test.csv"
                      folderNames: ""             # (global) exclude folders that match these names. Eg. "folder" or "subfolder"
                      viewable: false             # Enable viewing in UI but exclude from indexing
                defaultUserScope: "/"             # default "/" should match folders under path
                defaultEnabled: true              # should be added as a default source for new users?
                createUserDir: false              # create a user directory for each user
          externalUrl: "https://cloud.dartus.fr"                         # used by share links if set (eg. http://mydomain.com)
          internalUrl: "https://cloud.dartus.fr"                         # used by integrations if set, this is the base domain that an integration service will use to communicate with filebrowser (eg. http://localhost:8080)
          cacheDir: "tmp"                         # path to the cache directory, used for thumbnails and other cached files
          maxArchiveSize: 50                      # max pre-archive combined size of files/folder that are allowed to be archived (in GB)
          filesystem:                             # filesystem settings
            createFilePermission: "644"           # Unix permissions like 644, 755, 2755 (default: 644)  validate:required,file_permission
            createDirectoryPermission: "755"      # Unix permissions like 755, 2755, 1777 (default: 755)  validate:required,file_permission
        auth:
          tokenExpirationHours: 2                 # time in hours each web UI session token is valid for. Default is 2 hours.
          methods:
            proxy:                                #  validate:omitempty
              enabled: false
              createUser: false                   # create user if not exists
              header: ""                          # required header to use for authentication. Security Warning: FileBrowser blindly accepts the header value as username.
              logoutRedirectUrl: ""               # if provider logout url is provided, filebrowser will also redirect to logout url. Custom logout query params are respected.
            noauth: false                         # if set to true, overrides all other auth methods and disables authentication
            password:                             #  validate:omitempty
              enabled: true
              minLength: 5                        # minimum pasword length required, default is 5.  validate:omitempty
              signup: false                       # allow signups on login page if enabled -- not secure.  validate:omitempty
              recaptcha:                          # recaptcha config, only used if signup is enabled  validate:omitempty
                host: ""                          #  validate:required
                key: ""                           #  validate:required
                secret: ""                        #  validate:required
              enforcedOtp: false                  # if set to true, TOTP is enforced for all password users users. Otherwise, users can choose to enable TOTP.
            oidc:                                 #  validate:omitempty
              enabled: true                      # whether to enable OIDC authentication
              # clientId: ""                        # client id of the OIDC application
              # clientSecret: ""                    # client secret of the OIDC application
              issuerUrl: "https://authentik.dartus.fr/application/o/filebrowser/"                       # authorization URL of the OIDC provider
              scopes: "openid email profile"      # scopes to request from the OIDC provider
              userIdentifier: "preferred_username" # the field value to use as the username. Default is "preferred_username", can also be "email" or "username", or "phone"
              disableVerifyTLS: true             # disable TLS verification for the OIDC provider. This is insecure and should only be used for testing.
              logoutRedirectUrl: "https://authentik.dartus.fr/application/o/filebrowser/end-session/"               # if provider logout url is provided, filebrowser will also redirect to logout url. Custom logout query params are respected.
              createUser: true                   # create user if not exists
              adminGroup: "authentik Admins"                      # if set, users in this group will be granted admin privileges.
              groupsClaim: "groups"               # the JSON field name to read groups from. Default is "groups"
          key: ""                                 # secret: the key used to sign the JWT tokens. If not set, a random key will be generated.
          adminUsername: "**hidden**"             # secret: the username of the admin user. If not set, the default is "admin".
          adminPassword: "**hidden**"             # secret: the password of the admin user. If not set, the default is "admin".
          totpSecret: ""                          # secret: secret used to encrypt TOTP secrets
        frontend:
          name: "FileBrowser Quantum"             # display name
          disableDefaultLinks: false              # disable default links in the sidebar
          disableUsedPercentage: false            # disable used percentage for the sources in the sidebar
          externalLinks:
            - text: "(untracked)"                 # the text to display on the link  validate:required
              title: "untracked"                  # the title to display on hover
              url: "https://github.com/gtsteffaniak/filebrowser/releases/" # the url to link to  validate:required
            - text: "Help"                        # the text to display on the link  validate:required
              title: ""                           # the title to display on hover
              url: "help prompt"                  # the url to link to  validate:required
          disableNavButtons: false                # disable the nav buttons in the sidebar
          styling:
            customCSS: ""                         # if a valid path to a css file is provided, it will be applied for all users. (eg. "reduce-rounded-corners.css")
            lightBackground: "#f5f5f5"            # specify a valid CSS color property value to use as the background color in light mode
            darkBackground: "#141D24"             # Specify a valid CSS color property value to use as the background color in dark mode
            customThemes:                         # A list of custom css files that each user can select to override the default styling. if "default" is key name then it will be the default option.
              alternative:
                description: "Reduce rounded corners" # The description of the theme to display in the UI.
                css: "reduce-rounded-corners.css" # The css file path and filename to use for the theme.
              default:
                description: "The default theme"  # The description of the theme to display in the UI.
                css: ""                           # The css file path and filename to use for the theme.
          favicon: ""                             # path to a favicon to use for the frontend
          description: "FileBrowser Quantum is a file manager for the web which can be used to manage files on your server" # description that shows up in html head meta description
        userDefaults:
          editorQuickSave: false                  # show quick save button in editor
          hideSidebarFileActions: false           # hide the file actions in the sidebar
          disableQuickToggles: false              # disable the quick toggles in the sidebar
          disableSearchOptions: false             # disable the search options in the search bar
          stickySidebar: true                     # keep sidebar open when navigating
          darkMode: true                          # should dark mode be enabled
          locale: "en"                            # language to use: eg. de, en, or fr
          viewMode: "normal"                      # view mode to use: eg. normal, list, grid, or compact
          singleClick: false                      # open directory on single click, also enables middle click to open in new tab
          showHidden: false                       # show hidden files in the UI. On windows this includes files starting with a dot and windows hidden files
          dateFormat: false                       # when false, the date is relative, when true, the date is an exact timestamp
          gallerySize: 3                          # 0-9 - the size of the gallery thumbnails
          themeColor: "var(--blue)"               # theme color to use: eg. #ff0000, or var(--red), var(--purple), etc
          quickDownload: false                    # show icon to download in one click
          disablePreviewExt: ""                   # space separated list of file extensions to disable preview for
          disableViewingExt: ""                   # space separated list of file extensions to disable viewing for
          lockPassword: false                     # disable the user from changing their password
          disableSettings: false                  # disable the user from viewing the settings page
          preview:
            disableHideSidebar: false             # disable the hide sidebar preview for previews and editors
            highQuality: false                    # generate high quality thumbnail preview images
            image: false                          # show thumbnail preview image for image files
            video: false                          # show thumbnail preview image for video files
            motionVideoPreview: false             # show multiple frames for videos in thumbnail preview when hovering
            office: false                         # show thumbnail preview image for office files
            popup: false                          # show larger popup preview when hovering over thumbnail
            autoplayMedia: false                  # autoplay media files in preview
            defaultMediaPlayer: false             # disable html5 media player and use the default media player
            folder: false                         # show thumbnail preview image for folder files
          permissions:
            api: false                            # allow api access
            admin: false                          # allow admin access
            modify: false                         # allow modifying files
            share: false                          # allow sharing files
            realtime: false                       # allow realtime updates
            delete: false                         # allow deleting files
            create: false                         # allow creating or uploading files
            download: false                       # allow downloading files
          loginMethod: "password"                 # login method to use: eg. password, proxy, oidc
          disableUpdateNotifications: false       # disable update notifications banner for admin users
          deleteWithoutConfirming: false          # delete files without confirmation
          fileLoading:                            # upload and download settings
            maxConcurrentUpload: 1
            uploadChunkSizeMb: 5
            clearAll: false
          disableOnlyOfficeExt: ".md .txt .pdf"   # list of file extensions to disable onlyoffice editor for
          customTheme: ""                         # Name of theme to use chosen from custom themes config.
          showSelectMultiple: false               # show select multiple files on desktop
          debugOffice: false                      # debug onlyoffice editor
          defaultLandingPage: ""                  # default landing page to use if no redirect is specified: eg. /files/mysource/mysubpath, /settings, etc.
        integrations:
          office:                                 #  validate:omitempty
            url: ""                               # The URL to the OnlyOffice Document Server, needs to be accessible to the user.  validate:required
            internalUrl: ""                       # An optional internal address that the filebrowser server can use to communicate with the OnlyOffice Document Server, could be useful to bypass proxy.
            secret: ""                            # secret: authentication key for OnlyOffice integration  validate:required
            viewOnly: false                       # view only mode for OnlyOffice
          media:                                  #  validate:omitempty
            ffmpegPath: ""                        # path to ffmpeg directory with ffmpeg and ffprobe (eg. /usr/local/bin)
            convert:                              # config for ffmpeg conversion settings
              imagePreview:                       # supported image preview formats. defaults to false for all types unless explicitly enabled.
                heic: false
              videoPreview:                       # supported video preview formats. defaults to true for all types unless explicitly disabled.
                3g2: true
                3gp: true
                asf: true
                avi: true
                f4v: true
                flv: true
                m2ts: true
                m4v: true
                mkv: true
                mov: true
                mp4: true
                mpeg: true
                mpg: true
                ogv: true
                ts: true
                vob: true
                webm: true
                wmv: true
            debug: false                          # output ffmpeg stdout for media integration -- careful can produces lots of output!
            extractEmbeddedSubtitles: false       # extract embedded subtitles from media files
            
# -- Generate ConfigMaps from a folder in the Helm chart's filesystem
# Your files will need to be two levels deep from the base path.
# For example, if you set this to `files/`, you should have this file tree
# files:
# └── configmap1
#     ├── file1
#     └── file2
# This will generate a ConfigMap named `configmap1` with keys `file1` and `file2`.
configMapsFromFolder:
  enabled: false
  # #-- The path in your parent's chart filesystem where you can add files to be converted into individual ConfigMaps.
  # basePath: "files/configMaps"
  # #-- Define overrides for the generated ConfigMaps, each key is the name of a folder in `basePath`
  # configMapsOverrides:
  #   test:
  #     # All ConfigMaps support a `forceRename` field, which allows you to rename the ConfigMap
  #     forceRename: null
  #     annotations:
  #       test: test
  #     labels:
  #       test: test
  #     # Configure how the individual files are added to the ConfigMap
  #     fileAttributeOverrides:
  #       # The key is the name of the file inside the ConfigMap's folder
  #       test.tpl:
  #         # If true the file won't be added to the ConfigMap
  #         exclude: false
  #         # If your file is a binary file like an image, set this to true. Takes precedence over `escaped`
  #         binary: false
  #         # If your file contains `gotpl` syntax that you don't want templated by Helm, set this to true
  #         escaped: true
  #       test.txt:
  #         exclude: true
  #   test2:
  #     fileAttributeOverrides:
  #       image.png:
  #         binary: true# -- Configure the services for the chart here.
# Additional services can be added by adding a dictionary key similar to the 'main' service.
# @default -- See below
service:
  main:
    # -- Enables or disables the service
    enabled: true


    # -- Configure which controller this service should target
    controller: main

    # -- Make this the primary service for this controller (used in probes, notes, etc...).
    # If there is more than 1 service targeting the controller, make sure that only 1 service is
    # marked as primary.
    primary: true

    # -- Set the service type
    type: ClusterIP

    # # -- Specify the internalTrafficPolicy for the service. Options: Cluster, Local
    # # -- [[ref](https://kubernetes.io/docs/concepts/services-networking/service-traffic-policy/)]
    # internalTrafficPolicy:

    # # -- Specify the externalTrafficPolicy for the service. Options: Cluster, Local
    # # -- [[ref](https://kubernetes.io/docs/tutorials/services/source-ip/)]
    # externalTrafficPolicy:

    # # -- Specify the ip policy. Options: SingleStack, PreferDualStack, RequireDualStack
    # ipFamilyPolicy:
    # # -- The ip families that should be used. Options: IPv4, IPv6
    # ipFamilies: []

    # # -- Provide additional annotations which may be required.
    # annotations: {}

    # # -- Provide additional labels which may be required.
    # labels: {}

    # # -- Allow adding additional match labels
    # extraSelectorLabels: {}

    # # -- Configure the Service port information here.
    # # Additional ports can be added by adding a dictionary key similar to the 'http' service.
    # # @default -- See below
    ports:
      http:
        # -- Enables or disables the port
        enabled: true

        # -- Make this the primary port (used in probes, notes, etc...)
        # If there is more than 1 service, make sure that only 1 port is marked as primary.
        primary: true

        # -- The port number
        port: 80

        # -- Port protocol.
        # Support values are `HTTP`, `HTTPS`, `TCP` and `UDP`.
        # HTTP and HTTPS spawn a TCP service and get used for internal URL and name generation
        protocol: HTTP

        # # -- Specify a service targetPort if you wish to differ the service port from the application port.
        # # If `targetPort` is specified, this port number is used in the container definition instead of
        # # the `port` value. Therefore named ports are not supported for this field.
        # targetPort:

        # # -- Specify the nodePort value for the LoadBalancer and NodePort service types.
        # # [[ref]](https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport)
        # nodePort:

        # # -- Specify the appProtocol value for the Service.
        # # [[ref]](https://kubernetes.io/docs/concepts/services-networking/service/#application-protocol)
        # appProtocol:

# -- Configure the ingresses for the chart here.
ingress: 
  # -- An example is shown below
  main:
    # -- Enables or disables the ingress
    enabled: true

    # # -- Override the name suffix that is used for this ingress.
    # nameOverride:

    # # -- Provide additional annotations which may be required. Helm templates can be used.
    # annotations: {}
    annotations:
      hajimari.io/enable: "true"
      hajimari.io/group: "Media"
      hajimari.io/icon: "cloud-download"
      # traefik.ingress.kubernetes.io/router.middlewares: "network-authentik-forward-auth@kubernetescrd"
      cert-manager.io/cluster-issuer: zerossl-prod
      acme.cert-manager.io/http01-edit-in-place: "true"

    # # -- Provide additional labels which may be required. Helm templates can be used.
    # labels: {}

    # # -- Set the ingressClass that is used for this ingress.
    # className:

    # # -- Configure the defaultBackend for this ingress. This will disable any other rules for the ingress.
    # defaultBackend:

    ## Configure the hosts for the ingress
    hosts:
      - # -- Host address. Helm template can be passed.
        host: cloud.dartus.fr
        ## Configure the paths for the host
        paths:
          - # -- Path.  Helm template can be passed.
            path: /
            pathType: Prefix
            service:
              # -- Overrides the service name reference for this path
              # The service name to reference.
              identifier: main
              port: http              
              # # -- Reference a service identifier from this values.yaml
              # identifier: main
              # -- Overrides the service port number reference for this path
              # port: 9696

    # -- Configure TLS for the ingress. Both secretName and hosts can process a Helm template.
    tls:
      - hosts:
        - cloud.dartus.fr
        secretName: cloud.dartus.fr-tls

    #  - secretName: chart-example-tls
    #    hosts:
    #      - chart-example.local

# -- Configure the ServiceMonitors for the chart here.
# Additional ServiceMonitors can be added by adding a dictionary key similar to the 'main' ServiceMonitors.
# @default -- See below
serviceMonitor:
  {}
  # main:
  #   # -- Enables or disables the serviceMonitor.
  #   enabled: false

  #   # -- Override the name suffix that is used for this serviceMonitor.
  #   nameOverride: ""

  #   # -- Provide additional annotations which may be required.
  #   annotations: {}

  #   # -- Provide additional labels which may be required.
  #   labels: {}

  #   # -- Configures a custom selector for the serviceMonitor, this takes precedence over
  #   # specifying a service name.
  #   # Helm templates can be used.
  #   selector: {}

  #   # -- Configures the target Service for the serviceMonitor. Helm templates can be used.
  #   serviceName: ''

  #   # -- Configures the endpoints for the serviceMonitor.
  #   # @default -- See values.yaml
  #   endpoints:
  #     - port: http
  #       scheme: http
  #       path: /metrics
  #       interval: 1m
  #       scrapeTimeout: 10s

  #   # -- Configures custom targetLabels for the serviceMonitor. (All collected
  #   # meterics will have these labels, taking the value from the target service)
  #   # [[ref]](https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitorspec/)
  #   targetLabels: []

# -- Configure the gateway routes for the chart here.
# Additional routes can be added by adding a dictionary key similar to the 'main' route.
# [[ref]](https://gateway-api.sigs.k8s.io/references/spec/)
# @default -- See below
route:
  {}
  # main:
  #   # -- Enables or disables the route
  #   enabled: false

  #   # -- Set the route kind
  #   # Valid options are GRPCRoute, HTTPRoute, TCPRoute, TLSRoute, UDPRoute
  #   kind: HTTPRoute

  #   # -- Override the name suffix that is used for this route.
  #   nameOverride: ""

  #   # -- Provide additional annotations which may be required.
  #   annotations: {}

  #   # -- Provide additional labels which may be required.
  #   labels: {}

  #   # -- Configure the resource the route attaches to.
  #   parentRefs:
  #     - # Group of the referent resource.
  #       group: gateway.networking.k8s.io
  #       # Kind of the referent resource.
  #       kind: Gateway
  #       # Name of the referent resource
  #       name:
  #       # Namespace of the referent resource
  #       namespace:
  #       # Name of the section within the target resource.
  #       sectionName:

  #   # -- Host addresses. Helm template can be passed.
  #   hostnames: []

  #   # -- Configure rules for routing. Defaults to the primary service.
  #   rules:
  #     - # -- Configure backends where matching requests should be sent.
  #       backendRefs: []
  #       ## Configure conditions used for matching incoming requests. Only for HTTPRoutes
  #       matches:
  #         - path:
  #             type: PathPrefix
  #             value: /
  #       ## Request filters that are applied to the rules.
  #       filters: []
  #       ## Request timeout that are applied to the rules.
  #       timeouts: {}

# -- Configure persistence for the chart here.
# Additional items can be added by adding a dictionary key similar to the 'config' key.
# [[ref]](https://bjw-s.github.io/helm-charts/docs/common-library/common-library-storage)
# @default -- See below
persistence: 
  data:
    enabled: true
    type : persistentVolumeClaim
    existingClaim: pvc-all
    globalMounts:
      - path: /jeantasse
        readOnly: false
  config:
    enabled: true
    type: configMap
    identifier: config
#   config:
#   #   # -- Enables or disables the persistence item. Defaults to true
#     enabled: true

#   #   # -- Sets the persistence type
#   #   # Valid options are persistentVolumeClaim, emptyDir, nfs, hostPath, secret, configMap or custom
#     type: secret
#     name: sonarrConfig

  #   # -- Storage Class for the config volume.
  #   # If set to `-`, dynamic provisioning is disabled.
  #   # If set to something else, the given storageClass is used.
  #   # If undefined (the default) or set to null, no storageClassName spec is set, choosing the default provisioner.
  #   storageClass: # "-"

  #   # -- If you want to reuse an existing claim, the name of the existing PVC can be passed here.
  #   existingClaim: # your-claim

  #   # -- The optional data source for the persistentVolumeClaim.
  #   # [[ref]](https://kubernetes.io/docs/concepts/storage/persistent-volumes/#volume-populators-and-data-sources)
  #   dataSource: {}

  #   # -- The optional volume populator for the persistentVolumeClaim.
  #   # [[ref]](https://kubernetes.io/docs/concepts/storage/persistent-volumes/#volume-populators-and-data-sources)
  #   dataSourceRef: {}

  #   # -- AccessMode for the persistent volume.
  #   # Make sure to select an access mode that is supported by your storage provider!
  #   # [[ref]](https://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes)
  #   accessMode: ReadWriteOnce

  #   # -- The amount of storage that is requested for the persistent volume.
  #   size: 1Gi

  #   # -- Set to true to retain the PVC upon `helm uninstall`
  #   retain: false

  #   # -- Configure mounts to all controllers and containers. By default the persistence item
  #   # will be mounted to `/<name_of_the_peristence_item>`.
  #   # Example:
  #   # globalMounts:
  #   #   - path: /config
  #   #     readOnly: false
  #   globalMounts: []

  #   # -- Explicitly configure mounts for specific controllers and containers.
  #   # Example:
  #   # advancedMounts:
  #   #   main: # the controller with the "main" identifier
  #   #     main: # the container with the "main" identifier
  #   #       - path: /data/config.yaml
  #   #         readOnly: true
  #   #         mountPropagation: None
  #   #         subPath: config.yaml
  #   #     second-container: # the container with the "second-container" identifier
  #   #       - path: /appdata/config
  #   #         readOnly: true
  #   #   second-controller: # the controller with the "second-controller" identifier
  #   #     main: # the container with the "main" identifier
  #   #       - path: /data/config.yaml
  #   #         readOnly: false
  #   #         subPath: config.yaml
  #   advancedMounts: {}

# -- Configure the networkPolicies for the chart here.
# Additional networkPolicies can be added by adding a dictionary key similar to the 'main' networkPolicy.
# @default -- See below
networkpolicies:
  {}
  # main:
  #   # -- Enables or disables the networkPolicy item. Defaults to true
  #   enabled: false

  #   # -- Configure which controller this networkPolicy should target
  #   controller: main

  #   # -- Define a custom podSelector for the networkPolicy. This takes precedence over targeting a controller.
  #   # podSelector: {}

  #   # -- The policyTypes for this networkPolicy
  #   policyTypes:
  #     - Ingress
  #     - Egress

  #   # -- The rulesets for this networkPolicy
  #   # [[ref]](https://kubernetes.io/docs/concepts/services-networking/network-policies/#networkpolicy-resource)
  #   rules:
  #     # -- The ingress rules for this networkPolicy. Allows all ingress traffic by default.
  #     ingress:
  #       - {}
  #     # -- The egress rules for this networkPolicy. Allows all egress traffic by default.
  #     egress:
  #       - {}

# -- Configure any unsupported raw resources here.
# @default -- See below
rawResources:
  {}
  # example:
  #   # -- Enables or disables the resource. Defaults to true
  #   enabled: false
  #   # -- Specify the apiVersion of the resource.
  #   apiVersion: v1
  #   # -- Specify the kind of the resource.
  #   kind: Endpoint
  #   # -- Override the name suffix that is used for this resource.
  #   nameOverride: ""
  #   # -- Provide additional annotations which may be required.
  #   annotations: {}
  #   # -- Provide additional labels which may be required.
  #   labels: {}
  #   # -- Configure the contents of the resource that is to be rendered.
  #   spec:

# -- Configure the Roles and Role Bindings for the chart here.
rbac:
  {}
  # roles:
  #   role1:
  #     # -- Force replace the name of the object.
  #     forceRename: <force name>
  #     # -- Enables or disables the Role. Can be templated.
  #     enabled: true
  #     # -- Set to Role,ClusterRole
  #     type: Role
  #     rules:
  #       - apiGroups: ["*"]
  #         resources: ["*"]
  #         verbs: ["get", "list", "watch"]
  # bindings:
  #   binding1:
  #     # -- Force replace the name of the object.
  #     forceRename: <force name>
  #     # -- Enables or disables the Role. Can be templated.
  #     enabled: true
  #     # -- Set to RoleBinding,ClusterRoleBinding
  #     type: RoleBinding
  #     # -- Can be an identifier of rbac.roles or a custom name and kind
  #     roleRef:
  #       name: test-role
  #       kind: Role
  #       identifier: test
  #     # -- If using an identifier it will be automatically filled, otherwise every key will need to be explicitly declared
  #     subjects:
  #       - identifier: default
  #       - kind: ServiceAccount
  #         name: test
  #         namespace: "{{ .Release.Namespace }}"