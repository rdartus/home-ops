---
apiVersion: secrets.hashicorp.com/v1beta1
kind: SecretTransformation
metadata:
  name: decode-secrets
  namespace: default
  annotations:
    argocd.argoproj.io/sync-wave: "10"
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true

spec:
  templates:
    - name: dump-sonarr
      data: |
        b64dump_sonarr: {{ .Values.template_transfo_sonarr }}
    - name: dump-radarr
      data: |
        b64dump_radarr: {{ .Values.template_transfo_radarr }}
    - name: dump-prowlarr
      data: |
        b64dump_prowlarr: {{ .Values.template_transfo_prowlarr }}
  filters:
    includes:
      - "b64dump_sonarr"
      - "b64dump_radarr"
      - "b64dump_prowlarr"
